function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xur1:function(t,n,e){"use strict";e.r(n);var a=e("ofXK"),i=e("FfZp"),c=e("6rvT"),r=e("tyNb"),s=e("fXoL"),o=e("kmQS"),l=e("Rd8u"),b=e("bTqV"),d=function(){return{exact:!0}},h=function(t){return[t]};function p(t,n){if(1&t&&(s.Xb(0,"li",4),s.Xb(1,"a",5),s.Kc(2),s.Wb(),s.Wb()),2&t){var e=n.$implicit;s.Db(1),s.pc("routerLinkActiveOptions",s.sc(3,d))("routerLink",s.tc(4,h,e.route)),s.Db(1),s.Lc(e.name)}}function u(t,n){if(1&t&&(s.Xb(0,"header"),s.Xb(1,"h1",1),s.Kc(2,"Analytics"),s.Wb(),s.Xb(3,"ul",2),s.Ic(4,p,3,6,"li",3),s.Wb(),s.Wb()),2&t){var e=s.jc();s.Db(4),s.pc("ngForOf",e.channels)}}var g,f=((g=function(){function t(n){_classCallCheck(this,t),this.settings=n,this.channels=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.channels=this.settings.get("vebto.admin.analytics.channels",[]).filter((function(n){return!n.condition||t.settings.get(n.condition)}))}}]),t}()).\u0275fac=function(t){return new(t||g)(s.Rb(o.a))},g.\u0275cmp=s.Lb({type:g,selectors:[["analytics-host"]],decls:2,vars:1,consts:[[4,"ngIf"],["trans",""],[1,"analytics-nav"],["class","analytics-nav-item",4,"ngFor","ngForOf"],[1,"analytics-nav-item"],["mat-button","","routerLinkActive","active","trans","",3,"routerLinkActiveOptions","routerLink"]],template:function(t,n){1&t&&(s.Ic(0,u,5,1,"header",0),s.Sb(1,"router-outlet")),2&t&&s.pc("ngIf",n.channels&&n.channels.length)},directives:[a.t,r.i,l.a,a.s,b.a,r.g,r.f],styles:["[_nghost-%COMP%]{display:block;position:relative}header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);box-shadow:none;border:1px solid var(--be-divider-default);padding:10px 15px;border-radius:4px;margin-bottom:25px}h1[_ngcontent-%COMP%]{font-size:2.2rem;margin:0;font-weight:300;text-transform:capitalize}.analytics-nav[_ngcontent-%COMP%]{margin-left:auto}.analytics-nav-item[_ngcontent-%COMP%]{display:inline-block;padding:0 5px;text-transform:capitalize}.active[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast)}@media only screen and (max-width:768px){h1[_ngcontent-%COMP%]{display:none}.analytics-nav[_ngcontent-%COMP%]{margin-left:0}}"],changeDetection:0}),g),v=e("jtHE"),m=e("nYR2"),y=e("sPnx"),w=e("NFeN"),C=e("6SKC");function k(t,n){if(1&t&&(s.Xb(0,"div",6),s.Kc(1),s.kc(2,"number"),s.Wb()),2&t){var e=s.jc().$implicit;s.Db(1),s.Lc(s.lc(2,1,e.value))}}function x(t,n){if(1&t&&(s.Xb(0,"div",6),s.Kc(1),s.kc(2,"formattedFileSize"),s.Wb()),2&t){var e=s.jc().$implicit;s.Db(1),s.Lc(s.lc(2,1,e.value))}}function X(t,n){if(1&t&&(s.Xb(0,"div",1),s.Sb(1,"mat-icon",2),s.Xb(2,"div",3),s.Xb(3,"div",4),s.Kc(4),s.Wb(),s.Ic(5,k,3,3,"div",5),s.Ic(6,x,3,3,"div",5),s.Wb(),s.Wb()),2&t){var e=n.$implicit;s.Db(1),s.pc("svgIcon",e.icon),s.Db(3),s.Lc(e.name),s.Db(1),s.pc("ngIf","number"===e.type),s.Db(1),s.pc("ngIf","fileSize"===e.type)}}var W,P=((W=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||W)},W.\u0275cmp=s.Lb({type:W,selectors:[["analytics-header"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","stat",4,"ngFor","ngForOf"],[1,"stat"],[3,"svgIcon"],[1,"details"],["trans","",1,"name"],["class","count",4,"ngIf"],[1,"count"]],template:function(t,n){1&t&&s.Ic(0,X,7,4,"div",0),2&t&&s.pc("ngForOf",n.data)},directives:[a.s,w.a,l.a,a.t],pipes:[a.g,C.a],styles:["[_nghost-%COMP%]{display:flex;margin-bottom:25px}@media only screen and (max-width:768px){[_nghost-%COMP%]{display:none}}.stat[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;min-width:0;margin-right:25px;border-radius:4px;height:110px;align-items:center;color:var(--be-text);background-color:var(--be-background);box-shadow:none;border:1px solid var(--be-divider-default);padding:0 15px}.stat[_ngcontent-%COMP%]:last-of-type{margin-right:0}.details[_ngcontent-%COMP%]{margin-left:10px}.details[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:2.3rem;font-family:Montserrat,sans-serif;color:var(--be-text)}.details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--be-secondary-text)}.details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.mat-icon[_ngcontent-%COMP%]{color:var(--be-accent-default);opacity:.8;width:60px;height:60px}"],changeDetection:0}),W),O=e("+lSV"),_=e("bv9b");function D(t,n){1&t&&s.Sb(0,"mat-progress-bar",3)}var I,M=((I=function(){function t(n){_classCallCheck(this,t),this.http=n,this.loading$=new v.a(1),this.linkStats$=new v.a(1)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading$.next(!0),this.http.get("admin/analytics/stats",{channel:"clicks"}).pipe(Object(m.a)((function(){return t.loading$.next(!1)}))).subscribe((function(n){t.headerData=n.headerData,t.linkStats$.next(n.mainData)}))}}]),t}()).\u0275fac=function(t){return new(t||I)(s.Rb(y.a))},I.\u0275cmp=s.Lb({type:I,selectors:[["click-analytics-host"]],decls:5,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[3,"data"],[3,"reports"],["mode","indeterminate","color","accent"]],template:function(t,n){1&t&&(s.Ic(0,D,1,0,"mat-progress-bar",0),s.kc(1,"async"),s.Sb(2,"analytics-header",1),s.Sb(3,"click-charts",2),s.kc(4,"async")),2&t&&(s.pc("ngIf",s.lc(1,3,n.loading$)),s.Db(2),s.pc("data",n.headerData),s.Db(1),s.pc("reports",s.lc(4,5,n.linkStats$)))},directives:[a.t,P,O.a,_.a],pipes:[a.b],styles:[".mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:55px}"],changeDetection:0}),I),L=e("xAXq");function K(t){var n={selector:".monthly-chart",type:L.b.LINE,labels:[],tooltip:"Pageviews",data:[[],[]]};return t&&t.current.forEach((function(e,a){n.labels.push(""+(a+1)),n.data[0].push(e.pageViews);var i=t.previous[a];n.data[1].push(i?i.pageViews:0)})),n}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:L.b.PIE,tooltip:"Number of sessions",labels:t.map((function(t){return t.browser})),data:t.map((function(t){return t.sessions})),legend:!1,options:{showLabel:!0,donut:!0}}}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{selector:".countries-chart",type:L.b.PIE,tooltip:"Number of sessions",labels:t.map((function(t){return t.country})),data:t.map((function(t){return t.sessions})),options:{showLabel:!0,donut:!0}}}var V=e("L582");function j(t,n){1&t&&s.Sb(0,"mat-progress-bar",3)}function T(t,n){if(1&t&&(s.Vb(0),s.Xb(1,"div",4),s.Xb(2,"div",5),s.Xb(3,"div",6),s.Xb(4,"chart",7),s.Xb(5,"div",8),s.Xb(6,"div",9),s.Kc(7,"This Week vs Last Week"),s.Wb(),s.Xb(8,"div",10),s.Kc(9,"By page views"),s.Wb(),s.Wb(),s.Xb(10,"div",11),s.Xb(11,"div",12),s.Kc(12,"This week"),s.Wb(),s.Xb(13,"div",12),s.Kc(14,"Last week"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(15,"div",13),s.Xb(16,"chart",7),s.Xb(17,"div",8),s.Xb(18,"div",9),s.Kc(19,"Top Browsers"),s.Wb(),s.Xb(20,"div",10),s.Kc(21,"By sessions"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(22,"div",5),s.Xb(23,"div",6),s.Xb(24,"chart",7),s.Xb(25,"div",8),s.Xb(26,"div",9),s.Kc(27,"This Month vs Last Month"),s.Wb(),s.Xb(28,"div",10),s.Kc(29,"By page views"),s.Wb(),s.Wb(),s.Xb(30,"div",11),s.Xb(31,"div",12),s.Kc(32,"This month"),s.Wb(),s.Xb(33,"div",12),s.Kc(34,"Last month"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(35,"div",13),s.Xb(36,"chart",7),s.Xb(37,"div",8),s.Xb(38,"div",9),s.Kc(39,"Top Countries"),s.Wb(),s.Xb(40,"div",10),s.Kc(41,"By sessions"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Ub()),2&t){var e=n.ngIf,a=s.jc();s.Db(4),s.pc("chartConfig",e.weeklyPageViews)("height",a.chartHeight),s.Db(12),s.pc("chartConfig",e.browsers)("height",380),s.Db(8),s.pc("chartConfig",e.monthlyPageViews)("height",a.chartHeight),s.Db(12),s.pc("chartConfig",e.countries)("height",380)}}var z,F,E=[{path:"",component:f,children:[{path:"",redirectTo:"links"},{path:"links",component:M},{path:"google",component:(z=function(){function t(n){_classCallCheck(this,t),this.http=n,this.channel="default",this.chartHeight=400,this.loading$=new v.a(1),this.charts$=new v.a(1)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading$.next(!0),this.http.get("admin/analytics/stats",{channel:this.channel}).pipe(Object(m.a)((function(){return t.loading$.next(!1)}))).subscribe((function(n){t.headerData=n.headerData,t.charts$.next(t.generateCharts(n.mainData))}))}},{key:"generateCharts",value:function(t){return{weeklyPageViews:(n=t.weeklyPageViews,e={type:L.b.LINE,labels:[],tooltip:"Pageviews",data:[[],[]]},n&&n.current.forEach((function(t,a){e.labels.push(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return new Date(1e3*t).toLocaleDateString(n,{weekday:"short"})}(t.date)),e.data[0].push(t.pageViews),e.data[1].push(n.previous[a].pageViews)})),e),monthlyPageViews:K(t.monthlyPageViews),browsers:$(t.browsers),countries:S(t.countries)};var n,e}}]),t}(),z.\u0275fac=function(t){return new(t||z)(s.Rb(y.a))},z.\u0275cmp=s.Lb({type:z,selectors:[["default-analytics"]],decls:5,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[3,"data"],[4,"ngIf"],["mode","indeterminate","color","accent"],[1,"content"],[1,"chart-row"],[1,"chart-wrapper"],[3,"chartConfig","height"],[1,"chart-header"],["trans","",1,"title"],["trans","",1,"subtitle"],[1,"chart-legend"],["trans","",1,"legend-item"],[1,"chart-wrapper","pie-wrapper"]],template:function(t,n){1&t&&(s.Ic(0,j,1,0,"mat-progress-bar",0),s.kc(1,"async"),s.Sb(2,"analytics-header",1),s.Ic(3,T,42,8,"ng-container",2),s.kc(4,"async")),2&t&&(s.pc("ngIf",s.lc(1,3,n.loading$)),s.Db(2),s.pc("data",n.headerData),s.Db(1),s.pc("ngIf",s.lc(4,5,n.charts$)))},directives:[a.t,P,_.a,V.a,l.a],pipes:[a.b],styles:[".mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:55px}"],changeDetection:0}),z)}]}],N=((F=function t(){_classCallCheck(this,t)}).\u0275mod=s.Pb({type:F}),F.\u0275inj=s.Ob({factory:function(t){return new(t||F)},imports:[[r.h.forChild(E)],r.h]}),F),A=e("k3xQ"),B=e("Bjk8");e.d(n,"AnalyticsModule",(function(){return H}));var R,H=((R=function t(){_classCallCheck(this,t)}).\u0275mod=s.Pb({type:R}),R.\u0275inj=s.Ob({factory:function(t){return new(t||R)},imports:[[N,a.c,i.a,c.a,A.a,B.a,b.c,w.b,_.b]]}),R)}}]);
//# sourceMappingURL=9-es5.383c34efbb0f3adfb425.js.map